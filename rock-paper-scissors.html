<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock paper scissors</title>
    </head>

    <body>
        <script>
            //Generate a random integer from a range
            function randomIntRange(min, max) {
                return Math.floor(Math.random() * (max - min + 1) + min)
            }
            
            function computerPlay() {
                //Based on a random number between 1 and 3 return 'rock', 'paper'
                //or 'scissors'
                let rndNum = randomIntRange(1, 3);
                
                if (rndNum === 1) {
                    return "rock"
                } else if (rndNum === 2) {
                    return "paper"
                } else {
                    return "scissors"
                }
            }

            function getPlayerChoice() {
                let playerChoice = prompt("Please enter a choice (rock, paper or scissors):");
                return playerChoice.toLocaleLowerCase();
            }
            
            function playRound(playerSelection, computerSelection) {
                //Decides the winner or a tie of one game and display a message
                if (playerSelection === computerSelection) {
                    return "It's a tie!"
                } else if ((playerSelection === "rock" && computerSelection === "paper") ||
                (playerSelection === "paper" && computerSelection === "scissors") ||
                (playerSelection === "scissors" && computerSelection === "rock")) {
                    return `You Lose! ${computerSelection[0].toUpperCase()
                         + computerSelection.slice(1)} beats ${playerSelection[0].toUpperCase() 
                         + playerSelection.slice(1)}`
                } else {
                    return `You Win! ${playerSelection[0].toUpperCase()
                         + playerSelection.slice(1)} beats ${computerSelection[0].toUpperCase() 
                         + computerSelection.slice(1)}`
                }                
            }

            function game() {
                let playyerWins = 0;
                let computerWins = 0;
                let winnerRound;

                for (let i = 0; i < 5; i++) {
                    winnerRound = playRound(getPlayerChoice(), computerPlay());
                    console.log(winnerRound);

                    if (winnerRound.startsWith("You Win")) {
                        playyerWins += 1;
                    } else if (winnerRound.startsWith("You Lose")){
                        computerWins += 1;
                    }
                }

                if (playyerWins > computerWins) {
                    console.log("You Win!");
                } else if (playyerWins < computerWins){
                    console.log("You lose!");
                } else {
                    console.log("It's a tie!")
                }
            }

            game();
        </script>    
    </body>
</html>